<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>已在桌面生成城市列表</title>

    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
</head>
<body>
<div>
    <dl class="city-province" style="overflow: hidden; width: auto; height: auto;">
        <button onclick="postCities()">同步到数据库</button>
        <hr/>
        <button onclick="getCities()">获取数据</button>
        <br/>
        <br/>
        <div>
        </div>
        <dt class="A">安徽：</dt>
        <dd>
            <li adcode="340100">合肥</li>
            <li adcode="340200">芜湖</li>
            <li adcode="340300">蚌埠</li>
            <li adcode="340400">淮南</li>
            <li adcode="340500">马鞍山</li>
            <li adcode="340600">淮北</li>
            <li adcode="340700">铜陵</li>
            <li adcode="340800">安庆</li>
            <li adcode="341000">黄山</li>
            <li adcode="341100">滁州</li>
            <li adcode="341200">阜阳</li>
            <li adcode="341300">宿州</li>
            <li adcode="341500">六安</li>
            <li adcode="341600">亳州</li>
            <li adcode="341700">池州</li>
            <li adcode="341800">宣城</li>
        </dd>
        <dt class="F">福建：</dt>
        <dd>
            <li adcode="350100">福州</li>
            <li adcode="350200">厦门</li>
            <li adcode="350300">莆田</li>
            <li adcode="350400">三明</li>
            <li adcode="350500">泉州</li>
            <li adcode="350600">漳州</li>
            <li adcode="350700">南平</li>
            <li adcode="350800">龙岩</li>
            <li adcode="350900">宁德</li>
        </dd>
        <dt class="G">广东：</dt>
        <dd>
            <li adcode="440100">广州</li>
            <li adcode="440200">韶关</li>
            <li adcode="440300">深圳</li>
            <li adcode="440400">珠海</li>
            <li adcode="440500">汕头</li>
            <li adcode="440600">佛山</li>
            <li adcode="440700">江门</li>
            <li adcode="440800">湛江</li>
            <li adcode="440900">茂名</li>
            <li adcode="441200">肇庆</li>
            <li adcode="441300">惠州</li>
            <li adcode="441400">梅州</li>
            <li adcode="441500">汕尾</li>
            <li adcode="441600">河源</li>
            <li adcode="441700">阳江</li>
            <li adcode="441800">清远</li>
            <li adcode="441900">东莞</li>
            <li adcode="442000">中山</li>
            <li adcode="445100">潮州</li>
            <li adcode="445200">揭阳</li>
            <li adcode="445300">云浮</li>
        </dd>
        <dt class="G">广西：</dt>
        <dd>
            <li adcode="450100">南宁</li>
            <li adcode="450200">柳州</li>
            <li adcode="450300">桂林</li>
            <li adcode="450400">梧州</li>
            <li adcode="450500">北海</li>
            <li adcode="450600">防城港</li>
            <li adcode="450700">钦州</li>
            <li adcode="450800">贵港</li>
            <li adcode="450900">玉林</li>
            <li adcode="451000">百色</li>
            <li adcode="451100">贺州</li>
            <li adcode="451200">河池</li>
            <li adcode="451300">来宾</li>
            <li adcode="451400">崇左</li>
        </dd>
        <dt class="G">贵州：</dt>
        <dd>
            <li adcode="520100">贵阳</li>
            <li adcode="520200">六盘水</li>
            <li adcode="520300">遵义</li>
            <li adcode="520400">安顺</li>
            <li adcode="520500">毕节</li>
            <li adcode="520600">铜仁</li>
            <li adcode="522300">黔西南布依族苗族自治州</li>
            <li adcode="522600">黔东南苗族侗族自治州</li>
            <li adcode="522700">黔南布依族苗族自治州</li>
        </dd>
        <dt class="G">甘肃：</dt>
        <dd>
            <li adcode="620100">兰州</li>
            <li adcode="620200">嘉峪关</li>
            <li adcode="620300">金昌</li>
            <li adcode="620400">白银</li>
            <li adcode="620500">天水</li>
            <li adcode="620600">武威</li>
            <li adcode="620700">张掖</li>
            <li adcode="620800">平凉</li>
            <li adcode="620900">酒泉</li>
            <li adcode="621000">庆阳</li>
            <li adcode="621100">定西</li>
            <li adcode="621200">陇南</li>
            <li adcode="622900">临夏回族自治州</li>
            <li adcode="623000">甘南藏族自治州</li>
        </dd>
        <dt class="H">河北：</dt>
        <dd>
            <li adcode="130100">石家庄</li>
            <li adcode="130200">唐山</li>
            <li adcode="130300">秦皇岛</li>
            <li adcode="130400">邯郸</li>
            <li adcode="130500">邢台</li>
            <li adcode="130600">保定</li>
            <li adcode="130700">张家口</li>
            <li adcode="130800">承德</li>
            <li adcode="130900">沧州</li>
            <li adcode="131000">廊坊</li>
            <li adcode="131100">衡水</li>
        </dd>
        <dt class="H">黑龙江：</dt>
        <dd>
            <li adcode="230100">哈尔滨</li>
            <li adcode="230200">齐齐哈尔</li>
            <li adcode="230300">鸡西</li>
            <li adcode="230400">鹤岗</li>
            <li adcode="230500">双鸭山</li>
            <li adcode="230600">大庆</li>
            <li adcode="230700">伊春</li>
            <li adcode="230800">佳木斯</li>
            <li adcode="230900">七台河</li>
            <li adcode="231000">牡丹江</li>
            <li adcode="231100">黑河</li>
            <li adcode="231200">绥化</li>
            <li adcode="232700">大兴安岭</li>
        </dd>
        <dt class="H">河南：</dt>
        <dd>
            <li adcode="410100">郑州</li>
            <li adcode="410200">开封</li>
            <li adcode="410300">洛阳</li>
            <li adcode="410400">平顶山</li>
            <li adcode="410500">安阳</li>
            <li adcode="410600">鹤壁</li>
            <li adcode="410700">新乡</li>
            <li adcode="410800">焦作</li>
            <li adcode="410900">濮阳</li>
            <li adcode="411000">许昌</li>
            <li adcode="411100">漯河</li>
            <li adcode="411200">三门峡</li>
            <li adcode="411300">南阳</li>
            <li adcode="411400">商丘</li>
            <li adcode="411500">信阳</li>
            <li adcode="411600">周口</li>
            <li adcode="411700">驻马店</li>
            <li adcode="419001">济源</li>
        </dd>
        <dt class="H">湖北：</dt>
        <dd>
            <li adcode="420100">武汉</li>
            <li adcode="420200">黄石</li>
            <li adcode="420300">十堰</li>
            <li adcode="420500">宜昌</li>
            <li adcode="420600">襄阳</li>
            <li adcode="420700">鄂州</li>
            <li adcode="420800">荆门</li>
            <li adcode="420900">孝感</li>
            <li adcode="421000">荆州</li>
            <li adcode="421100">黄冈</li>
            <li adcode="421200">咸宁</li>
            <li adcode="421300">随州</li>
            <li adcode="422800">恩施土家族苗族自治州</li>
            <li adcode="429004">仙桃</li>
            <li adcode="429005">潜江</li>
            <li adcode="429006">天门</li>
            <li adcode="429021">神农架林区</li>
        </dd>
        <dt class="H">湖南：</dt>
        <dd>
            <li adcode="430100">长沙</li>
            <li adcode="430200">株洲</li>
            <li adcode="430300">湘潭</li>
            <li adcode="430400">衡阳</li>
            <li adcode="430500">邵阳</li>
            <li adcode="430600">岳阳</li>
            <li adcode="430700">常德</li>
            <li adcode="430800">张家界</li>
            <li adcode="430900">益阳</li>
            <li adcode="431000">郴州</li>
            <li adcode="431100">永州</li>
            <li adcode="431200">怀化</li>
            <li adcode="431300">娄底</li>
            <li adcode="433100">湘西土家族苗族自治州</li>
        </dd>
        <dt class="H">海南：</dt>
        <dd>
            <li adcode="460100">海口</li>
            <li adcode="460200">三亚</li>
            <li adcode="460300">三沙</li>
            <li adcode="460400">儋州</li>
        </dd>
        <dt class="J">吉林：</dt>
        <dd>
            <li adcode="220100">长春</li>
            <li adcode="220200">吉林</li>
            <li adcode="220300">四平</li>
            <li adcode="220400">辽源</li>
            <li adcode="220500">通化</li>
            <li adcode="220600">白山</li>
            <li adcode="220700">松原</li>
            <li adcode="220800">白城</li>
            <li adcode="222400">延边朝鲜族自治州</li>
        </dd>
        <dt class="J">江苏：</dt>
        <dd>
            <li adcode="320100">南京</li>
            <li adcode="320200">无锡</li>
            <li adcode="320300">徐州</li>
            <li adcode="320400">常州</li>
            <li adcode="320500">苏州</li>
            <li adcode="320600">南通</li>
            <li adcode="320700">连云港</li>
            <li adcode="320800">淮安</li>
            <li adcode="320900">盐城</li>
            <li adcode="321000">扬州</li>
            <li adcode="321100">镇江</li>
            <li adcode="321200">泰州</li>
            <li adcode="321300">宿迁</li>
        </dd>
        <dt class="J">江西：</dt>
        <dd>
            <li adcode="360100">南昌</li>
            <li adcode="360200">景德镇</li>
            <li adcode="360300">萍乡</li>
            <li adcode="360400">九江</li>
            <li adcode="360500">新余</li>
            <li adcode="360600">鹰潭</li>
            <li adcode="360700">赣州</li>
            <li adcode="360800">吉安</li>
            <li adcode="360900">宜春</li>
            <li adcode="361000">抚州</li>
            <li adcode="361100">上饶</li>
        </dd>
        <dt class="L">辽宁：</dt>
        <dd>
            <li adcode="210100">沈阳</li>
            <li adcode="210200">大连</li>
            <li adcode="210300">鞍山</li>
            <li adcode="210400">抚顺</li>
            <li adcode="210500">本溪</li>
            <li adcode="210600">丹东</li>
            <li adcode="210700">锦州</li>
            <li adcode="210800">营口</li>
            <li adcode="210900">阜新</li>
            <li adcode="211000">辽阳</li>
            <li adcode="211100">盘锦</li>
            <li adcode="211200">铁岭</li>
            <li adcode="211300">朝阳</li>
            <li adcode="211400">葫芦岛</li>
        </dd>
        <dt class="N">内蒙古：</dt>
        <dd>
            <li adcode="150100">呼和浩特</li>
            <li adcode="150200">包头</li>
            <li adcode="150300">乌海</li>
            <li adcode="150400">赤峰</li>
            <li adcode="150500">通辽</li>
            <li adcode="150600">鄂尔多斯</li>
            <li adcode="150700">呼伦贝尔</li>
            <li adcode="150800">巴彦淖尔</li>
            <li adcode="150900">乌兰察布</li>
            <li adcode="152200">兴安盟</li>
            <li adcode="152500">锡林郭勒盟</li>
            <li adcode="152900">阿拉善盟</li>
        </dd>
        <dt class="N">宁夏：</dt>
        <dd>
            <li adcode="640100">银川</li>
            <li adcode="640200">石嘴山</li>
            <li adcode="640300">吴忠</li>
            <li adcode="640400">固原</li>
            <li adcode="640500">中卫</li>
        </dd>
        <dt class="Q">青海：</dt>
        <dd>
            <li adcode="630100">西宁</li>
            <li adcode="630200">海东</li>
            <li adcode="632200">海北藏族自治州</li>
            <li adcode="632300">黄南藏族自治州</li>
            <li adcode="632500">海南藏族自治州</li>
            <li adcode="632600">果洛藏族自治州</li>
            <li adcode="632700">玉树藏族自治州</li>
            <li adcode="632800">海西蒙古族藏族自治州</li>
        </dd>
        <dt class="S">山西：</dt>
        <dd>
            <li adcode="140100">太原</li>
            <li adcode="140200">大同</li>
            <li adcode="140300">阳泉</li>
            <li adcode="140400">长治</li>
            <li adcode="140500">晋城</li>
            <li adcode="140600">朔州</li>
            <li adcode="140700">晋中</li>
            <li adcode="140800">运城</li>
            <li adcode="140900">忻州</li>
            <li adcode="141000">临汾</li>
            <li adcode="141100">吕梁</li>
        </dd>
        <dt class="S">山东：</dt>
        <dd>
            <li adcode="370100">济南</li>
            <li adcode="370200">青岛</li>
            <li adcode="370300">淄博</li>
            <li adcode="370400">枣庄</li>
            <li adcode="370500">东营</li>
            <li adcode="370600">烟台</li>
            <li adcode="370700">潍坊</li>
            <li adcode="370800">济宁</li>
            <li adcode="370900">泰安</li>
            <li adcode="371000">威海</li>
            <li adcode="371100">日照</li>
            <li adcode="371200">莱芜</li>
            <li adcode="371300">临沂</li>
            <li adcode="371400">德州</li>
            <li adcode="371500">聊城</li>
            <li adcode="371600">滨州</li>
            <li adcode="371700">菏泽</li>
        </dd>
        <dt class="S">四川：</dt>
        <dd>
            <li adcode="510100">成都</li>
            <li adcode="510300">自贡</li>
            <li adcode="510400">攀枝花</li>
            <li adcode="510500">泸州</li>
            <li adcode="510600">德阳</li>
            <li adcode="510700">绵阳</li>
            <li adcode="510800">广元</li>
            <li adcode="510900">遂宁</li>
            <li adcode="511000">内江</li>
            <li adcode="511100">乐山</li>
            <li adcode="511300">南充</li>
            <li adcode="511400">眉山</li>
            <li adcode="511500">宜宾</li>
            <li adcode="511600">广安</li>
            <li adcode="511700">达州</li>
            <li adcode="511800">雅安</li>
            <li adcode="511900">巴中</li>
            <li adcode="512000">资阳</li>
            <li adcode="513200">阿坝藏族羌族自治州</li>
            <li adcode="513300">甘孜藏族自治州</li>
            <li adcode="513400">凉山彝族自治州</li>
        </dd>
        <dt class="S">陕西：</dt>
        <dd>
            <li adcode="610100">西安</li>
            <li adcode="610200">铜川</li>
            <li adcode="610300">宝鸡</li>
            <li adcode="610400">咸阳</li>
            <li adcode="610500">渭南</li>
            <li adcode="610600">延安</li>
            <li adcode="610700">汉中</li>
            <li adcode="610800">榆林</li>
            <li adcode="610900">安康</li>
            <li adcode="611000">商洛</li>
        </dd>
        <dt class="T">台湾：</dt>
        <dd>
            <li adcode="719002">台北</li>
            <li adcode="719019">高雄</li>
            <li adcode="719017">台中</li>
            <li adcode="719016">台南</li>
            <li adcode="719010">新北</li>
            <li adcode="719011">基隆</li>
            <li adcode="719006">新竹</li>
            <li adcode="719004">嘉义</li>
        </dd>
        <dt class="X">西藏：</dt>
        <dd>
            <li adcode="540100">拉萨</li>
            <li adcode="540200">日喀则</li>
            <li adcode="540300">昌都</li>
            <li adcode="540400">林芝</li>
            <li adcode="542200">山南</li>
            <li adcode="542400">那曲</li>
            <li adcode="542500">阿里</li>
        </dd>
        <dt class="X">新疆：</dt>
        <dd>
            <li adcode="650100">乌鲁木齐</li>
            <li adcode="650200">克拉玛依</li>
            <li adcode="650400">吐鲁番</li>
            <li adcode="652200">哈密</li>
            <li adcode="652300">昌吉回族自治州</li>
            <li adcode="652700">博尔塔拉蒙古自治州</li>
            <li adcode="652800">巴音郭楞蒙古自治州</li>
            <li adcode="652900">阿克苏</li>
            <li adcode="653000">克孜勒苏柯尔克孜自治州</li>
            <li adcode="653100">喀什</li>
            <li adcode="653200">和田</li>
            <li adcode="654000">伊犁哈萨克自治州</li>
            <li adcode="654200">塔城</li>
            <li adcode="654300">阿勒泰</li>
            <li adcode="659001">石河子</li>
            <li adcode="659002">阿拉尔</li>
            <li adcode="659003">图木舒克</li>
            <li adcode="659004">五家渠</li>
        </dd>
        <dt class="Y">云南：</dt>
        <dd>
            <li adcode="530100">昆明</li>
            <li adcode="530300">曲靖</li>
            <li adcode="530400">玉溪</li>
            <li adcode="530500">保山</li>
            <li adcode="530600">昭通</li>
            <li adcode="530700">丽江</li>
            <li adcode="530800">普洱</li>
            <li adcode="530900">临沧</li>
            <li adcode="532300">楚雄彝族自治州</li>
            <li adcode="532500">红河哈尼族彝族自治州</li>
            <li adcode="532600">文山壮族苗族自治州</li>
            <li adcode="532800">西双版纳傣族自治州</li>
            <li adcode="532900">大理白族自治州</li>
            <li adcode="533100">德宏傣族景颇族自治州</li>
            <li adcode="533300">怒江傈僳族自治州</li>
            <li adcode="533400">迪庆藏族自治州</li>
        </dd>
        <dt class="Z">浙江：</dt>
        <dd>
            <li adcode="330100">杭州</li>
            <li adcode="330200">宁波</li>
            <li adcode="330300">温州</li>
            <li adcode="330400">嘉兴</li>
            <li adcode="330500">湖州</li>
            <li adcode="330600">绍兴</li>
            <li adcode="330700">金华</li>
            <li adcode="330800">衢州</li>
            <li adcode="330900">舟山</li>
            <li adcode="331000">台州</li>
            <li adcode="331100">丽水</li>
        </dd>
        <dt class="Z">直辖市及特区：</dt>
        <dd>
            <li adcode="110000">北京</li>
            <li adcode="120000">天津</li>
            <li adcode="310000">上海</li>
            <li adcode="500000">重庆</li>
            <li adcode="810000">香港</li>
            <li adcode="820000">澳门</li>

        </dd>

    </dl>
</div>

</body>
<script>
    // let provs = document.getElementsByTagName('dt');
    // let length = provs.length;
    // for (let i = 0; i < length; i++) {
    //     let innerHTML = provs[i].innerHTML;
    //     console.log(innerHTML.split('：')[0])
    //
    //     console.log(typeof provs[i])
    //     let citys = provs[i].childNodes
    //     console.log(citys)
    //
    // }

    let cityContainer = []
    let dataContent = ''

    $(function () {
        let provinces = $('dt');
        provinces.css('border', 'solid 1px blue')

        let length = provinces.length;
        for (let i = 0; i < length; i++) {
            let province = provinces[i];
            let provName = province.innerHTML.split('：')[0];
            let className = province.className
            console.log(provName, ': ', className)

            let cityEls = $('dt').eq(i).next().children();
            // console.log($('dt').eq(0))
            let cities = []
            for (let j = 0; j < cityEls.length; j++) {
                let cityName = cityEls[j].innerHTML;
                let adCode = $('dt').eq(i).next().children().eq(j).attr('adcode');

                // console.log('  --',cityName)
                cities.push({name: cityName, adCode: adCode})
            }

            cityContainer.push({
                name: provName,
                cities: cities,
                index: className,
            })
        }
        console.log(cityContainer)

        dataContent = JSON.stringify(cityContainer);

        // 自动下载cities文件
        // downloadJson('cities.json', dataContent)

    })




    function postCities() {
        console.log("开始发送数据 ... Container: ", cityContainer);
        alert("源代码已被注释.")
        // $.ajax('http://localhost:9527/init_cities', {
        //     type: "POST",
        //     data: JSON.stringify({
        //         provinces: cityContainer
        //     }),
        //     dataType: 'json',
        //     contentType: 'application/json',
        //     success: function (response) {
        //         console.log("获取返回值",response.data)
        //     },
        //     error: function (e) {
        //         console.log("数据同步失败" + e.message)
        //     }
        // })

    }

    function getCities() {
        $.ajax('http://localhost:9527/get_cities', {
            type: "GET",
            contentType: 'application/json',
            success: function (response) {
                console.log("获取返回值", response)
            },
            error: function (e) {
                console.log("数据同步失败" + e.message)
            }
        })

    }

    function downloadJson(filename, content) {
        var pom = document.createElement('a');
        pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));
        pom.setAttribute('download', filename);
        if (document.createEvent) {
            var event = document.createEvent('MouseEvents');
            event.initEvent('click', true, true);
            pom.dispatchEvent(event);
        } else {
            pom.click();
        }
    }



</script>

</html>